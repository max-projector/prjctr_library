<script src="https://code.jquery.com/jquery-3.5.0.js"></script>
<div class="header-filters">
  <form
    id="filter-options"
    class="header-filter header-filter--hidden header-filter--offcanvas"
    method="post"
    novalidate
  >
    <div
      class="
        button button_smaller
        results_btn
        header-filter__btn header-filter__btn--hidden
      "
    >
      <button class="button__link" type="button">Показати результати</button>
    </div>
    <div class="header-filter__overlay"></div>
    <div class="header-filter__pane">
      <div>
        <div class="header-filter__top-panel">
          <button class="pagination-top__back-button back-button">
            <svg class="icon icon-arrow-left-white-custom">
              <use
                xlink:href="img/sprite.svg#icon-arrow-left-white-custom"
              ></use>
            </svg>
          </button>
          <button
            class="button button_wider header-filter__close button-close"
            type="button"
          >
            <span class="intro-black-friday-second__content">Очистити</span>
          </button>
        </div>

        <div class="header-filter__tip header-filter__tip--offset-md">
          Формат
        </div>
        <ul class="header-filter__list">
          <li>
            <label for="format-1"
              ><input
                id="format-1"
                type="radio"
                name="format"
                value="1"
                data-type="all"
                checked
              /><i></i>Всі</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="format-2"
              ><input id="format-2" type="radio" name="format" value="2" /><i></i
              >Відеолекції</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="format-3"
              ><input id="format-3" type="radio" name="format" value="3" /><i></i
              >Конференції</label
            >
            <div>22</div>
          </li>

          <li>
            <label for="format-4"
              ><input id="format-4" type="radio" name="format" value="4" /><i></i
              >Плейлисти</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="format-5"
              ><input id="format-5" type="radio" name="format" value="5" /><i></i
              >Відеокурси</label
            >
            <div>22</div>
          </li>
        </ul>

        <div class="header-filter__tip header-filter__tip--offset-md">
          Напрямки
        </div>
        <ul class="header-filter__list">
          <li>
            <label for="direction-1"
              ><input
                id="direction-1"
                type="radio"
                name="direction"
                value="1"
                data-type="all"
                checked
              /><i></i>Всі</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="direction-2"
              ><input id="direction-2" type="radio" name="direction" value="2" /><i></i
              >Dev &amp; DS</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="direction-3"
              ><input id="direction-3" type="radio" name="direction" value="3" /><i></i
              >Graphics</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="direction-4"
              ><input id="direction-4" type="radio" name="direction" value="4" /><i></i
              >Interface Design</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="direction-5"
              ><input id="direction-5" type="radio" name="direction" value="5" /><i></i
              >Management</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="direction-6"
              ><input id="direction-6" type="radio" name="direction" value="6" /><i></i
              >Marketing</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="direction-7"
              ><input id="direction-7" type="radio" name="direction" value="7" /><i></i
              >Creative Ads</label
            >
            <div>22</div>
          </li>
        </ul>
        <div class="header-filter__tip header-filter__tip--offset-md">
          Рівень
        </div>
        <ul class="header-filter__list">
          <li>
            <label for="level-2"
              ><input id="level-2" type="radio" name="level" value="2" /><i></i
              >Будь-який</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="level-3"
              ><input id="level-3" type="radio" name="level" value="3" /><i></i
              >Початківцям</label
            >
            <div>22</div>
          </li>
          <li>
            <label for="level-4"
              ><input id="level-4" type="radio" name="level" value="4" /><i></i
              >Спеціалістам</label
            >
            <div>22</div>
          </li>
        </ul>
      </div>
    </div>
  </form>
</div>

<script>
  // body scroll lock
  !(function (e, o) {
    if ("function" == typeof define && define.amd) define(["exports"], o);
    else if ("undefined" != typeof exports) o(exports);
    else {
      var t = {};
      o(t), (e.bodyScrollLock = t);
    }
  })(this, function (exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: !0 });
    var t = !1;
    if ("undefined" != typeof window) {
      var e = {
        get passive() {
          t = !0;
        },
      };
      window.addEventListener("testPassive", null, e),
        window.removeEventListener("testPassive", null, e);
    }
    function d(o) {
      return s.some(function (e) {
        return !(!e.options.allowTouchMove || !e.options.allowTouchMove(o));
      });
    }
    function l(e) {
      var o = e || window.event;
      return (
        !!d(o.target) ||
        1 < o.touches.length ||
        (o.preventDefault && o.preventDefault(), !1)
      );
    }
    function n() {
      void 0 !== m && ((document.body.style.paddingRight = m), (m = void 0)),
        void 0 !== v && ((document.body.style.overflow = v), (v = void 0));
    }
    function i() {
      if (void 0 !== f) {
        var e = -parseInt(document.body.style.top, 10),
          o = -parseInt(document.body.style.left, 10);
        (document.body.style.position = f.position),
          (document.body.style.top = f.top),
          (document.body.style.left = f.left),
          window.scrollTo(o, e),
          (f = void 0);
      }
    }
    var c =
        "undefined" != typeof window &&
        window.navigator &&
        window.navigator.platform &&
        (/iP(ad|hone|od)/.test(window.navigator.platform) ||
          ("MacIntel" === window.navigator.platform &&
            1 < window.navigator.maxTouchPoints)),
      s = [],
      u = !1,
      a = -1,
      v = void 0,
      f = void 0,
      m = void 0;
    (exports.disableBodyScroll = function (r, e) {
      if (r) {
        if (
          !s.some(function (e) {
            return e.targetElement === r;
          })
        ) {
          var o = { targetElement: r, options: e || {} };
          (s = [].concat(
            (function (e) {
              if (Array.isArray(e)) {
                for (var o = 0, t = Array(e.length); o < e.length; o++)
                  t[o] = e[o];
                return t;
              }
              return Array.from(e);
            })(s),
            [o]
          )),
            c
              ? window.requestAnimationFrame(function () {
                  if (void 0 === f) {
                    f = {
                      position: document.body.style.position,
                      top: document.body.style.top,
                      left: document.body.style.left,
                    };
                    var e = window,
                      o = e.scrollY,
                      t = e.scrollX,
                      n = e.innerHeight;
                    (document.body.style.position = "fixed"),
                      (document.body.style.top = -o + "px"),
                      (document.body.style.left = -t + "px"),
                      setTimeout(function () {
                        return window.requestAnimationFrame(function () {
                          var e = n - window.innerHeight;
                          e && n <= o && (document.body.style.top = -(o + e));
                        });
                      }, 300);
                  }
                })
              : (function (e) {
                  if (void 0 === m) {
                    var o = !!e && !0 === e.reserveScrollBarGap,
                      t =
                        window.innerWidth -
                        document.documentElement.clientWidth;
                    if (o && 0 < t) {
                      var n = parseInt(
                        window
                          .getComputedStyle(document.body)
                          .getPropertyValue("padding-right"),
                        10
                      );
                      (m = document.body.style.paddingRight),
                        (document.body.style.paddingRight = n + t + "px");
                    }
                  }
                  void 0 === v &&
                    ((v = document.body.style.overflow),
                    (document.body.style.overflow = "hidden"));
                })(e),
            c &&
              ((r.ontouchstart = function (e) {
                1 === e.targetTouches.length &&
                  (a = e.targetTouches[0].clientY);
              }),
              (r.ontouchmove = function (e) {
                var o, t, n, i;
                1 === e.targetTouches.length &&
                  ((t = r),
                  (i = (o = e).targetTouches[0].clientY - a),
                  d(o.target) ||
                    ((t && 0 === t.scrollTop && 0 < i) ||
                    ((n = t) &&
                      n.scrollHeight - n.scrollTop <= n.clientHeight &&
                      i < 0)
                      ? l(o)
                      : o.stopPropagation()));
              }),
              u ||
                (document.addEventListener(
                  "touchmove",
                  l,
                  t ? { passive: !1 } : void 0
                ),
                (u = !0)));
        }
      } else
        console.error(
          "disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices."
        );
    }),
      (exports.clearAllBodyScrollLocks = function () {
        c &&
          (s.forEach(function (e) {
            (e.targetElement.ontouchstart = null),
              (e.targetElement.ontouchmove = null);
          }),
          u &&
            (document.removeEventListener(
              "touchmove",
              l,
              t ? { passive: !1 } : void 0
            ),
            (u = !1)),
          (a = -1)),
          (c ? i : n)(),
          (s = []);
      }),
      (exports.enableBodyScroll = function (o) {
        o
          ? ((s = s.filter(function (e) {
              return e.targetElement !== o;
            })),
            c &&
              ((o.ontouchstart = null),
              (o.ontouchmove = null),
              u &&
                0 === s.length &&
                (document.removeEventListener(
                  "touchmove",
                  l,
                  t ? { passive: !1 } : void 0
                ),
                (u = !1))),
            (c ? i : n)())
          : console.error(
              "enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices."
            );
      });
  });
</script>

<script>
  $(function () {
    const openFilter = function (el) {
      el.removeClass("header-filter--hidden");

      setTimeout(function () {
        bodyScrollLock.disableBodyScroll(el[0]);
        el.removeClass("header-filter--offcanvas");
      });
    };

    const closeFilter = function (el) {
      el.one("transitionend", "", function () {
        bodyScrollLock.enableBodyScroll(el[0]);
        el.addClass("header-filter--hidden");
      }).addClass("header-filter--offcanvas");
    };

    $(".header-filters").each(function () {
      $(this).on(
        "click",
        ".header-filter__overlay, .header-filter__close",
        function (e) {
          e.preventDefault();
          const el = $(this).parents(".header-filter");

          closeFilter(el);
        }
      );
    });

    $(".header-filters-menu__btn").on("click", function (e) {
      e.preventDefault();
      const filter = $(this).data("filter");
      const el = $("#" + filter);

      openFilter(el);
    });

    $(".header-filters")
      .find("form")
      .each(function () {
        const form = $(this);
        const formGroupsTotal = form.find(":checked").length;
        let state = form.serialize();

        form.on("change", 'input[type="radio"]', function () {
          const updatedState = form.serialize();

          if (state != updatedState) {
            form
              .find(".header-filter__btn")
              .removeClass("header-filter__btn--hidden");
          } else {
            form
              .find(".header-filter__btn")
              .addClass("header-filter__btn--hidden");
          }
        });

        form.on("click", ".header-filter__btn", function (e) {
          e.preventDefault();
          const updatedState = form.serialize();

          // go to url + updatedState
          state = updatedState;

          let allCounter = 0;

          form.find(":checked").each(function () {
            if ($(this).data("type") == "all") {
              allCounter++;
            }
          });

          if (allCounter == formGroupsTotal) {
            $(
              '.header-filters-menu__btn[data-filter="' + form[0].id + '"]'
            ).removeClass("header-filters-menu__btn--filled");
          } else {
            $(
              '.header-filters-menu__btn[data-filter="' + form[0].id + '"]'
            ).addClass("header-filters-menu__btn--filled");
          }

          closeFilter(form);
          form
            .find(".header-filter__btn")
            .addClass("header-filter__btn--hidden");
        });
      });
  });
</script>
